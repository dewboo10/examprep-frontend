<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Performance Dashboard</title>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <!-- AOS Animation Library -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <!-- Custom Styles (must be last) -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="antialiased bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen">
  <!-- Mobile Toggle Button (always visible on mobile) -->
  <button id="mobile-menu-button" class="md:hidden fixed top-4 left-4 z-50 bg-white p-2 rounded-lg shadow-lg">
    <i class="fas fa-bars text-xl text-indigo-600"></i>
  </button>

  <!-- Sidebar -->
  <aside id="sidebar" class="fixed top-0 left-0 w-64 h-screen bg-white shadow-lg z-50 p-4 flex flex-col overflow-y-auto">
    <!-- Sidebar Header with Close Button -->
    <div class="flex items-center justify-between mb-6 pb-4 border-b border-gray-100">
      <div class="flex items-center">
        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-md">
          <i class="fas fa-graduation-cap text-white text-lg"></i>
        </div>
        <h1 class="text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent ml-3">परीक्षा prep</h1>
      </div>
      <button id="mobile-menu-button-close" class="md:hidden text-gray-500 hover:text-indigo-600 transition-colors absolute top-4 right-4">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>
    <!-- User Profile Card -->
    <a href="user-info.html" class="block focus:outline-none">
    <div class="user-profile-card flex items-center mb-6 p-4 rounded-xl transition-all hover:shadow-lg cursor-pointer relative">
      <div class="relative">
        <div class="w-12 h-12 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center text-indigo-600 shadow-inner">
          <i class="fas fa-user-graduate text-xl"></i>
        </div>
        <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-green-400 rounded-full border-2 border-white flex items-center justify-center">
          <i class="fas fa-crown text-white text-xs"></i>
        </div>
      </div>
      <div class="ml-3 flex-1 flex flex-col">
        <p class="font-semibold text-sm" id="username">User</p>
        <span class="mt-2 inline-flex items-center text-xs text-indigo-600 font-semibold bg-indigo-50 px-2 py-0.5 rounded hover:bg-indigo-100 transition w-max">
          <i class="fas fa-eye mr-1"></i> View Details
        </span>
      </div>
    </div>
    </a>
    <!-- Navigation Links -->
    <nav class="flex-1 overflow-y-auto sidebar-scrollbar space-y-1 mb-4">
      <a href="dashboard.html" class="menu-item flex items-center p-3 rounded-xl text-gray-700 font-medium">
        <i class="fas fa-home mr-3 text-indigo-500"></i>
        Dashboard
      </a>
      <a href="select-exam.html" class="menu-item flex items-center p-3 rounded-xl text-gray-700 hover:text-indigo-600">
        <i class="fas fa-list-ol mr-3 text-blue-500"></i>
        Select Exam
      </a>
      <a href="performance.html" class="menu-item active flex items-center p-3 rounded-xl text-green-600 hover:text-green-700 font-medium">
        <i class="fas fa-chart-bar mr-3 text-green-500"></i>
        Performance
      </a>
      <a href="mock-test.html" class="menu-item flex items-center p-3 rounded-xl text-gray-700 hover:text-indigo-600">
        <i class="fas fa-book-open mr-3 text-purple-500"></i>
        Practice Tests
      </a>
      <a href="PracticeQuestion.html" class="menu-item flex items-center p-3 rounded-xl text-pink-600 hover:text-pink-700 font-medium">
        <i class="fas fa-question-circle mr-3 text-pink-500"></i>
        Practice Questions
      </a>
      <a href="practice-quant.html" class="menu-item flex items-center p-3 rounded-xl text-blue-600 hover:text-blue-700 font-medium">
        <i class="fas fa-book mr-3 text-blue-400"></i>
        Study Notes
      </a>
      <a href="previous-year.html" class="menu-item flex items-center p-3 rounded-xl text-yellow-600 hover:text-yellow-700 font-medium">
        <i class="fas fa-clock-rotate-left mr-3 text-yellow-500"></i>
        Previous Year Questions
      </a>
    </nav>
    <!-- Bottom Section -->
    <div class="mt-auto pt-4 border-t border-gray-100">
      <!-- Brain Games Card -->
      <div class="mb-4">
        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-2">Brain Boosters</p>
        <a href="braingames.html" class="brain-games-item flex items-center p-3 font-medium rounded-xl text-purple-700 bg-purple-50">
          <i class="fas fa-gamepad mr-3 text-lg text-purple-600"></i>
          Brain Games
          <span class="ml-auto bg-white text-purple-600 text-xs px-2 py-1 rounded-full font-bold shadow-sm">New</span>
        </a>
      </div>
      <!-- Current Exam Card -->
      <div class="current-exam-card p-3 rounded-xl">
        <p class="text-xs font-medium text-gray-500 mb-1">Current Exam</p>
        <div class="flex items-center">
          <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-2">
            <i class="fas fa-bookmark text-indigo-600 text-sm"></i>
          </div>
          <p class="font-semibold text-sm" id="current-exam">CAT</p>
          <button class="ml-auto text-xs text-indigo-600 hover:text-indigo-800 font-medium">Change</button>
        </div>
      </div>
      <!-- Sidebar Logout Button -->
      <button onclick="logout()" class="modern-btn w-full flex items-center justify-center gap-2 px-4 py-2 text-base font-semibold mt-2 mb-2"><i class="fas fa-sign-out-alt"></i><span>Logout</span></button>
      <!-- App Download Button (visible only on mobile) -->
      <div class="mt-4 md:hidden">
        <a href="#" class="get-app-btn w-full flex items-center justify-center px-4 py-3 text-sm font-semibold rounded-xl">
          <i class="fas fa-download mr-2"></i> Get Mobile App
        </a>
      </div>
    </div>
  </aside>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const sidebar = document.getElementById('sidebar');
    const openBtn = document.getElementById('mobile-menu-button');
    const closeBtn = document.getElementById('mobile-menu-button-close');
    const body = document.body;

    function toggleSidebar(show = true) {
      if (show) {
        sidebar.classList.add('open');
        body.classList.add('sidebar-open');
      } else {
        sidebar.classList.remove('open');
        body.classList.remove('sidebar-open');
      }
    }

    openBtn?.addEventListener('click', (e) => {
      e.stopPropagation();
      toggleSidebar(true);
    });

    closeBtn?.addEventListener('click', (e) => {
      e.stopPropagation();
      toggleSidebar(false);
    });

    document.addEventListener('click', function (e) {
      if (
        window.innerWidth < 768 &&
        sidebar.classList.contains('open') &&
        !sidebar.contains(e.target) &&
        !openBtn.contains(e.target)
      ) {
        toggleSidebar(false);
      }
    });

    window.addEventListener('resize', function () {
      if (window.innerWidth >= 768) {
        toggleSidebar(false);
      }
    });
  });
  </script>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const username = localStorage.getItem('username');
    const usernameEl = document.getElementById('username');
    if (usernameEl) {
      usernameEl.textContent = username || 'Guest';
    }
  });
  </script>

  <!-- Main content should have ml-0 md:ml-64 -->
  <main class="ml-0 md:ml-64">
    <div class="container mx-auto px-4 py-8">
      <!-- Header -->
      <div class="mb-12 fade-in" data-aos="fade-down">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-3">Performance Dashboard</h1>
        <p class="text-gray-600 text-lg">Track your learning progress and analytics</p>
      </div>

      <!-- Overall Stats Cards -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
        <!-- Total Quizzes -->
        <div id="totalQuizzesCard" class="card rounded-xl shadow-lg p-6 hover-scale" data-aos="fade-up" data-aos-delay="100">
          <div class="flex items-center">
            <div class="p-4 rounded-full bg-blue-100 text-blue-600 mr-4 transform hover:rotate-12 transition-transform">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
              </svg>
            </div>
            <div>
              <h3 class="text-gray-500 text-sm font-medium">Total Quizzes</h3>
              <p id="totalQuizzes" class="text-3xl font-bold text-blue-600 animate-countup">0</p>
            </div>
          </div>
        </div>

        <!-- Total Score -->
        <div id="totalScoreCard" class="card rounded-xl shadow-lg p-6 hover-scale" data-aos="fade-up" data-aos-delay="200">
          <div class="flex items-center">
            <div class="p-4 rounded-full bg-green-100 text-green-600 mr-4 transform hover:rotate-12 transition-transform">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h3 class="text-gray-500 text-sm font-medium">Total Score</h3>
              <p id="totalScore" class="text-3xl font-bold text-green-600 animate-countup">0</p>
            </div>
          </div>
        </div>

        <!-- Total Time -->
        <div id="totalTimeCard" class="card rounded-xl shadow-lg p-6 hover-scale" data-aos="fade-up" data-aos-delay="300">
          <div class="flex items-center">
            <div class="p-4 rounded-full bg-purple-100 text-purple-600 mr-4 transform hover:rotate-12 transition-transform">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h3 class="text-gray-500 text-sm font-medium">Total Time</h3>
              <p id="totalTime" class="text-3xl font-bold text-purple-600">0h 0m</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Accuracy and Percentile -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
        <!-- Accuracy -->
        <div class="card rounded-xl shadow-lg p-6 hover-scale" data-aos="fade-up" data-aos-delay="400">
          <h2 class="text-xl font-semibold text-gray-700 mb-6">Average Accuracy</h2>
          <div class="flex items-center justify-between">
            <p id="avgAccuracy" class="text-4xl font-bold text-gray-800">0%</p>
            <div class="relative w-24 h-24">
              <svg class="w-full h-full transform -rotate-90" viewBox="0 0 36 36">
                <path
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  stroke="#e6e6e6"
                  stroke-width="3"
                />
                <path
                  id="accuracyRing"
                  class="progress-ring"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  stroke="#3b82f6"
                  stroke-width="3"
                  stroke-dasharray="100 100"
                  stroke-dashoffset="100"
                />
              </svg>
              <div class="absolute inset-0 flex items-center justify-center">
                <span id="accuracyPercentage" class="text-lg font-medium text-gray-600">0%</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Percentile -->
        <div class="card rounded-xl shadow-lg p-6 hover-scale" data-aos="fade-up" data-aos-delay="500">
          <h2 class="text-xl font-semibold text-gray-700 mb-6">Predicted Percentile</h2>
          <div class="flex items-center justify-between">
            <p id="predictedPercentile" class="text-4xl font-bold text-gray-800">0</p>
            <div class="relative">
              <div class="h-24 w-24 rounded-full border-4 border-gray-200 flex items-center justify-center transform hover:scale-110 transition-transform">
                <span class="text-2xl font-bold text-gray-700">%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Best and Least Performing Sections -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
        <!-- Best Section -->
        <div class="card bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-xl p-6 hover-scale" data-aos="fade-up" data-aos-delay="600">
          <h3 class="text-green-800 font-semibold mb-3 text-lg">Best Section</h3>
          <p id="bestSection" class="text-2xl font-bold text-gray-800">—</p>
          <p class="text-sm text-green-600 mt-3">Average Score: <span id="bestSectionAvg" class="font-medium">0</span></p>
        </div>

        <!-- Least Section -->
        <div class="card bg-gradient-to-br from-red-50 to-red-100 border border-red-200 rounded-xl p-6 hover-scale" data-aos="fade-up" data-aos-delay="700">
          <h3 class="text-red-800 font-semibold mb-3 text-lg">Least Section</h3>
          <p id="leastSection" class="text-2xl font-bold text-gray-800">—</p>
          <p class="text-sm text-red-600 mt-3">Average Score: <span id="leastSectionAvg" class="font-medium">0</span></p>
        </div>
      </div>

      <!-- Section-wise Scores Chart -->
      <div class="card rounded-xl shadow-lg p-6 mb-12 hover-scale" data-aos="fade-up" data-aos-delay="800">
        <h2 class="text-xl font-semibold text-gray-700 mb-6">Section-wise Scores</h2>
        <div class="h-80">
          <canvas id="sectionChart"></canvas>
        </div>
      </div>

      <!-- Recent Quiz Attempts Table -->
      <div class="card rounded-xl shadow-lg overflow-hidden hover-scale" data-aos="fade-up" data-aos-delay="900">
        <div class="p-6">
          <h2 class="text-xl font-bold text-gray-700 mb-6">Recent Quiz Attempts</h2>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Test</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Score</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                  <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                </tr>
              </thead>
              <tbody id="recentAttemptsTableBody" class="bg-white divide-y divide-gray-200">
                <!-- Data will be inserted here by JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Initialize AOS
    AOS.init({
      duration: 800,
      once: true,
      offset: 100
    });

    // Enhanced animation for count-up effect
    function animateValue(id, start, end, duration) {
      const obj = document.getElementById(id);
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        const value = Math.floor(progress * (end - start) + start);
        obj.innerHTML = value.toLocaleString();
        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      };
      window.requestAnimationFrame(step);
    }

    // Enhanced progress ring animation
    function setProgress(percent) {
      const circle = document.getElementById('accuracyRing');
      const circumference = 2 * Math.PI * 15.9155;
      const offset = circumference - (percent / 100) * circumference;
      circle.style.strokeDashoffset = offset;
      document.getElementById('accuracyPercentage').textContent = `${percent}%`;
      document.getElementById('avgAccuracy').textContent = `${percent}%`;
    }

    // Add hover effect to table rows
    document.addEventListener('DOMContentLoaded', function() {
      const tableBody = document.getElementById('recentAttemptsTableBody');
      if (tableBody) {
        const rows = tableBody.getElementsByTagName('tr');
        for (let row of rows) {
          row.classList.add('table-row-hover');
        }
      }
    });

    // Example usage (replace with your actual data binding):
    // animateValue("totalQuizzes", 0, 42, 1500);
    // animateValue("totalScore", 0, 385, 1500);
    // setProgress(75);
  </script>
  <script src="js/performance.js"></script>
  <script src="js/main.js" defer></script>
</body>
</html>